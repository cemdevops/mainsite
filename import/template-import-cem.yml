id: import_documents
label: Node document
migration_group: documents
# Source
source:
  plugin: csv
  path: 'C:\xampp1\htdocs\cem\sites\default\files\import-documents.csv'
  delimiter: ';'
  header_row_count: 1
  # Unique ID
  keys:
    - id
  constants:
      bool_0: 0
      bool_1: 1
      uid_root: 1
      full_html: full_html
# Destination
destination:
  plugin: entity:node
  default_bundle: documentos
# Process
process:
  sticky: constants/bool_0
  promote: constants/bool_1
  uid: constants/uid_root
  langcode: pt-br
  # fields
  title: titulo
  body/value: descricao_do_conjunto_de_dados
  body/format: constants/full_html
  field_documento_data_ref: data_ref
  field_documento:
    source: nome_arquivo
    plugin: migration_lookup
    migration: import_files
   field_documento_tipos:
     -
       plugin: explode
       delimiter: '#'
       source: tipos
     -
       plugin: migration_lookup
       migration: import_tipos
  field_documento_temas:
    -
      plugin: explode
      delimiter: '#'
      source: temas
  field_documento_fontes:
    -
      plugin: explode
      delimiter: '#'
      source: fontes
    -
      plugin: migration_lookup
      migration: import_fontes
  field_documento_tags:
    -
      plugin: explode
      delimiter: '#'
      source: tags
    -
      plugin: migration_lookup
      migration: import_tags
  field_documento_data_lancamento:
    plugin: format_date
    from_format: 'd/m/y'
    to_format: 'd-m-Y'
    source: date_of_birth

migration_dependencies: 
 optional:
   - import_files
   - import_fontes
   - import_tipos
   - import_temas
   - import_tags