id: import_nodes_ref15
label: Node document
migration_group: documents_itens
# Source.
source:
  plugin: csv
  path: 'C:\xampp1\htdocs\cem\sites\default\files\import-documentos2.csv'
  delimiter: ';'
  header_row_count: 1
  # Unique ID.
  keys:
    - id
  constants:
      bool_0: 0
      bool_1: 1
      uid_root: 1
      full_html: full_html
# Destination
destination:
  plugin: entity:node
  default_bundle: documentos

# Process
process:
  sticky: constants/bool_0
  promote: constants/bool_1
  uid: constants/uid_root
  langcode: pt-br
  # fields
  title: titulo
  body/value: descricao_do_conjunto_de_dados
  body/format: constants/full_html
  field_documento:
    source: nome_arquivo
    plugin: migration_lookup
    migration: import_files002
  # field_documento_tipos:
    # -
      # plugin: explode
      # delimiter: ', '
      # source: tipo
    # -
      # plugin: migration_lookup
      # migration: import_terms001
  # field_documento_temas:
    # -
      # plugin: explode
      # delimiter: ', '
      # source: temas
  field_documento_fontes:
    -
      plugin: explode
      delimiter: ','
      source: fontes
    -
      plugin: migration_lookup
      migration: import_terms001
  # field_documento_tags:
    # -
      # plugin: explode
      # delimiter: ', '
      # source: tags 
  # field_dob:
    # plugin: format_date
    # from_format: 'm/d/Y'
    # to_format: 'Y-m-d'
    # source: date_of_birth	  
#  field_associated_document:
#    plugin: static_map
#    source: id_ref
#    map:
#      17: 2417
#      18: 2418
#      19: 2419
#      20: 2420

migration_dependencies: 
 optional:
   - import_files002
   - import_terms001